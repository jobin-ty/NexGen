<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXGEN | Intelligence Portal</title>
    
    <script>
        (function() {
            const savedTheme = localStorage.getItem('nexgen-theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;600;800&family=Orbitron:wght@600;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #05010a; 
            --uv: #8b5cf6; 
            --emerald: #00ffaa; 
            --text-main: #f1f5f9;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.08);
            --accent-glow: rgba(139, 92, 246, 0.15);
        }

        [data-theme="light"] {
            --bg: #f8fafc;
            --uv: #6d28d9;
            --emerald: #059669;
            --text-main: #0f172a;
            --glass: rgba(15, 23, 42, 0.02);
            --border: rgba(15, 23, 42, 0.08);
            --accent-glow: rgba(109, 40, 217, 0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            transition: background 0.8s ease;
        }

        /* --- BACKGROUND LAYERS --- */
        #neural-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.6;
        }

        .grain-overlay {
            position: fixed;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.04;
            z-index: 5;
            pointer-events: none;
        }

        /* --- FLOATING COMMAND NAV --- */
        .top-nav {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1400px;
            height: 70px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            z-index: 1000;
            backdrop-filter: blur(25px) saturate(180%);
            background: rgba(255, 255, 255, 0.01);
            border: 1px solid var(--border);
            border-radius: 16px;
        }

        .nav-brand { display: flex; align-items: center; gap: 12px; }
        .status-dot {
            width: 8px; height: 8px;
            background: var(--emerald);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--emerald);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }

        .nav-brand span {
            font-family: 'Orbitron';
            font-size: 0.8rem;
            letter-spacing: 3px;
            font-weight: 900;
        }

        .nav-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 40px;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-main);
            font-size: 0.65rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 700;
            opacity: 0.5;
            transition: 0.3s;
        }
        .nav-link:hover { opacity: 1; color: var(--uv); }

        .nav-right { display: flex; align-items: center; gap: 20px; }
        #clock {
            font-family: 'Orbitron';
            font-size: 0.85rem;
            padding-right: 20px;
            border-right: 1px solid var(--border);
            opacity: 0.8;
        }

        .theme-toggle {
            background: var(--uv);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.65rem;
            font-weight: 800;
            text-transform: uppercase;
            transition: 0.3s;
        }

        /* --- HERO --- */
        .hero {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .hero-content { display: flex; gap: 12vw; align-items: center; text-align: center; }
        .stat-label {
            text-transform: uppercase;
            letter-spacing: 10px;
            font-size: 0.6rem;
            font-weight: 800;
            margin-bottom: 15px;
            opacity: 0.4;
        }
        .stat-value { font-family: 'Orbitron'; font-size: clamp(5rem, 10vw, 10rem); line-height: 1; }

        .gauge-svg {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -45%);
            width: 550px; height: 550px;
            z-index: -1;
            opacity: 0.3;
        }

        .gauge-path {
            fill: none;
            stroke-width: 0.8;
            stroke-dasharray: 1500;
            stroke-dashoffset: 1500;
            transition: stroke-dashoffset 3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* --- BENTO SECTION --- */
        .features-section {
            position: relative;
            z-index: 2;
            background: var(--bg);
            padding: 150px 0;
            border-top: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .section-intro {
            text-align: center;
            max-width: 800px;
            margin-bottom: 80px;
        }

        .section-intro p { font-size: 2.5rem; font-weight: 200; line-height: 1.2; letter-spacing: -1px; }

        .bento-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-auto-rows: 280px;
            gap: 20px;
            width: 90%;
            max-width: 1200px;
        }

        .bento-item {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 40px;
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.6s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .bento-item.reveal { opacity: 1; transform: translateY(0); }
        .bento-item:hover { border-color: var(--uv); background: var(--accent-glow); }

        .large { grid-column: span 2; }
        .tall { grid-row: span 2; }

        .emerald { color: var(--emerald); stroke: var(--emerald); }
        .purple { color: var(--uv); stroke: var(--uv); }

    </style>
</head>
<body>

    <div class="grain-overlay"></div>
    <canvas id="neural-bg"></canvas>

    <nav class="top-nav">
        <div class="nav-brand">
            <div class="status-dot"></div>
            <span>NEXGEN_LIVE</span>
        </div>
        <div class="nav-center">
            <a href="index.html" class="nav-link">Home</a>
            <a href="map.html" class="nav-link">Map</a>
            <a href="terminal.html" class="nav-link">Terminal</a>
        </div>
        <div class="nav-right">
            <div id="clock">00:00:00</div>
            <button class="theme-toggle" onclick="toggleTheme()">Swap</button>
        </div>
    </nav>

    <section class="hero" id="hero">
        <div class="hero-content">
            <div class="stat-block">
                <p class="stat-label">Air Quality Index</p>
                <div class="stat-value emerald" id="aqi-num">0</div>
                <svg class="gauge-svg">
                    <circle class="gauge-path emerald" cx="275" cy="275" r="250" />
                </svg>
            </div>

            <div class="stat-block">
                <p class="stat-label">Temperature</p>
                <div class="stat-value purple" id="weather-num">0¬∞</div>
                <svg class="gauge-svg">
                    <circle class="gauge-path purple" cx="275" cy="275" r="250" />
                </svg>
            </div>
        </div>
    </section>

    <section class="features-section">
        <div class="section-intro">
            <h2 style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 6px; color: var(--uv); margin-bottom: 20px;">Infrastructure Control</h2>
            <p>Managing the next generation of urban metabolism with neural precision.</p>
        </div>

        <div class="bento-grid">
            <div class="bento-item large">
                <span style="font-size: 1.5rem;">üöÜ</span>
                <h3 style="margin-top: 20px;">Autonomous Mobility</h3>
                <p style="opacity: 0.6; font-weight: 300;">Coordination of electric transit swarms across the city's neural grid.</p>
            </div>
            <div class="bento-item tall">
                <span style="font-size: 1.5rem;">üåø</span>
                <h3 style="margin-top: 20px;">Sovereign Energy</h3>
                <p style="opacity: 0.6; font-weight: 300;">Localized harvesting nodes integrated into every architectural skin.</p>
            </div>
            <div class="bento-item">
                <span style="font-size: 1.5rem;">üõ°Ô∏è</span>
                <h3 style="margin-top: 20px;">Shield Core</h3>
                <p style="opacity: 0.6; font-weight: 300;">Predictive safety protocols.</p>
            </div>
            <div class="bento-item">
                <span style="font-size: 1.5rem;">‚òÅÔ∏è</span>
                <h3 style="margin-top: 20px;">Bio-Filtration</h3>
                <p style="opacity: 0.6; font-weight: 300;">Vertical atmospheric sequestering.</p>
            </div>
            <div class="bento-item large">
                <span style="font-size: 1.5rem;">üìà</span>
                <h3 style="margin-top: 20px;">District Analytics</h3>
                <p style="opacity: 0.6; font-weight: 300;">Granular live data streaming from every city block for resource allocation.</p>
            </div>
        </div>
    </section>

    <script>
        // --- THEME LOGIC ---
        function toggleTheme() {
            const current = document.documentElement.getAttribute('data-theme');
            const target = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', target);
            localStorage.setItem('nexgen-theme', target);
        }

        // --- CLOCK ---
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour12: false});
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- NEURAL BACKGROUND ---
        const canvas = document.getElementById('neural-bg');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function initMesh() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            particles = [];
            for (let i = 0; i < 70; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.4,
                    vy: (Math.random() - 0.5) * 0.4
                });
            }
        }

        function drawMesh() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const color = getComputedStyle(document.documentElement).getPropertyValue('--uv').trim();
            
            particles.forEach((p, i) => {
                p.x += p.vx; p.y += p.vy;
                if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                ctx.fillStyle = color;
                ctx.globalAlpha = 0.2;
                ctx.beginPath();
                ctx.arc(p.x, p.y, 1.2, 0, Math.PI * 2);
                ctx.fill();

                for (let j = i + 1; j < particles.length; j++) {
                    const p2 = particles[j];
                    const d = Math.hypot(p.x - p2.x, p.y - p2.y);
                    if (d < 150) {
                        ctx.strokeStyle = color;
                        ctx.globalAlpha = (1 - d / 150) * 0.12;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.stroke();
                    }
                }
            });
            requestAnimationFrame(drawMesh);
        }

        // --- ANIMATIONS & SCROLL ---
        function animateValue(id, start, end, duration, suffix) {
            let obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start) + suffix;
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY;
            const hero = document.getElementById('hero');
            hero.style.opacity = 1 - (scrolled / 700);
            hero.style.transform = `scale(${1 - (scrolled / 5000)})`;

            document.querySelectorAll('.bento-item').forEach((item, index) => {
                if(item.getBoundingClientRect().top < window.innerHeight * 0.85) {
                    setTimeout(() => { item.classList.add('reveal'); }, index * 80);
                }
            });
        });

        window.addEventListener('load', () => {
            initMesh();
            drawMesh();
            animateValue("aqi-num", 180, 12, 2000, "");
            animateValue("weather-num", 0, 24, 2000, "¬∞");
            const paths = document.querySelectorAll('.gauge-path');
            setTimeout(() => {
                paths[0].style.strokeDashoffset = "1300"; 
                paths[1].style.strokeDashoffset = "1100"; 
            }, 400);
        });
        window.addEventListener('resize', initMesh);
    </script>
</body>
</html>

